<!DOCTYPE html>
<html>
  <head>
    <title>Working with spatial data and mapping in R</title>
    <meta charset="utf-8">
    <meta name="author" content="Eric Pedersen and Aaron Adamack" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Working with spatial data and mapping in R
## The sf and sp packages
### Eric Pedersen and Aaron Adamack
### March 23rd, 2018

---




# What we'll be talking about today:
.huge[
- Why map in R? 
]

--

.huge[
- Short intro to spatial data and GIS concepts
]
--

.huge[
- What are the sp and sf packages, and why does it help to know both?
]

--

.huge[
- How to, for sp and sf: 
]
  - Load maps
  - Putting data with spatial coordinates into R spatial data format
  - Plotting basic maps

--

.huge[
- A quick demo of a couple useful tools: 
]
  - Plotting sf and sp maps in ggplot2
  - Rgooglemaps
  
---
# Why map in R?

.huge[
- Makes it easier to get information from maps
]

--

.huge[
- Can map data and model outputs more easily
]

--

.huge[
- It's reproducible]

--

.huge[
- You can make really nice maps]


---
![](figures/bike_ggplot.png)



---

#The very basics for GIS
.large[
Why do we need special packages for spatial data? It's all lat-long anyway, right? 
]
--

.pull-left[

.huge[ 
1.Spatial objects are complex
]

![](figures/geometry_types.png)
]

--

.pull-right[

.huge[ 
2.We live on a mishapen globe
]

![](figures/Earth_Gravitational_Model_1996.png)
]

---
#What spatial packages do:

* ### Keep track of spatial information:
  * #### polygons, lines, etc.
  * #### datum and projection

--

* ### Keep track of data associated with each spatial object

--

* ### Determine how data should be plotted

--

* ### Calculate spatial transformations and interactions between spatial datasets

---
#The sp package


* .large[The original method of working with spatial data in R]

--

* .large[Stores spatial information seperately from data, in the same] object

--
* .large[Different types of object for different types of spatial data:]
  * e.g. "SpatialPolygons", "SpatialPoints", "SpatialPolygonsDataFrame"

--

* .large[Pros:] 
  * Stable
  * Lots of packages that support it


--


* .large[Cons:]
  * Can be hard to access data
  * Slower than sf
  * Doesn't work with Tidyverse packages


---

#The sp package



```r
library(sp)
library(rgdal)

atlantic_map_sp = readOGR("data/map_layers/atlantic_map.shp")
print(atlantic_map_sp)
plot(atlantic_map_sp)
```

---

#The sp package

.pull-left[

```
## OGR data source with driver: ESRI Shapefile 
## Source: "data/map_layers/atlantic_map.shp", layer: "atlantic_map"
## with 1 features
## It has 1 fields
```

```
## An object of class "SpatialPolygonsDataFrame"
## Slot "data":
##    pop_est
## 0 33487208
## 
## Slot "polygons":
## [[1]]
## An object of class "Polygons"
## Slot "Polygons":
## [[1]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -60.24705  46.11480
## 
## Slot "area":
## [1] 0.1572221
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -60.66701 46.00000
##  [2,] -60.57319 46.06143
##  [3,] -60.58574 46.11665
##  [4,] -60.50493 46.20386
##  [5,] -60.43086 46.25562
##  [6,] -60.37651 46.28457
##  [7,] -60.29795 46.31123
##  [8,] -60.24385 46.27012
##  [9,] -60.22646 46.19556
## [10,] -60.09248 46.20601
## [11,] -59.96143 46.19097
## [12,] -59.86504 46.15952
## [13,] -59.85000 46.14141
## [14,] -59.84878 46.11294
## [15,] -59.88091 46.06162
## [16,] -59.93403 46.01943
## [17,] -59.89609 46.00000
## [18,] -60.66701 46.00000
## 
## 
## [[2]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -60.82544  46.43875
## 
## Slot "area":
## [1] 0.6011736
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -61.48804 46.00000
##  [2,] -61.48062 46.05977
##  [3,] -61.40864 46.17036
##  [4,] -61.30220 46.24385
##  [5,] -61.24053 46.30254
##  [6,] -60.98252 46.65049
##  [7,] -60.93198 46.72944
##  [8,] -60.87017 46.79678
##  [9,] -60.75967 46.86338
## [10,] -60.61665 46.97578
## [11,] -60.57104 46.99883
## [12,] -60.48906 47.00972
## [13,] -60.40820 47.00352
## [14,] -60.43135 46.96294
## [15,] -60.42544 46.92319
## [16,] -60.33174 46.76782
## [17,] -60.33291 46.73701
## [18,] -60.38408 46.61333
## [19,] -60.48242 46.41353
## [20,] -60.50771 46.30337
## [21,] -60.49453 46.27026
## [22,] -60.53442 46.21455
## [23,] -60.57686 46.17217
## [24,] -60.74482 46.09268
## [25,] -60.83057 46.07412
## [26,] -60.91221 46.04458
## [27,] -60.99836 46.00000
## [28,] -61.48804 46.00000
## 
## 
## [[3]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.75820  47.43919
## 
## Slot "area":
## [1] 0.05283497
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -61.91411 47.28452
##  [2,] -61.87871 47.26553
##  [3,] -61.81548 47.26758
##  [4,] -61.77256 47.25981
##  [5,] -61.83374 47.22261
##  [6,] -61.95083 47.21899
##  [7,] -62.00000 47.23207
##  [8,] -62.00000 47.25323
##  [9,] -61.92471 47.42515
## [10,] -61.82729 47.46909
## [11,] -61.62783 47.59385
## [12,] -61.54805 47.63179
## [13,] -61.47407 47.64678
## [14,] -61.39551 47.63765
## [15,] -61.47554 47.56396
## [16,] -61.58223 47.56001
## [17,] -61.68408 47.49873
## [18,] -61.75088 47.43081
## [19,] -61.83125 47.39204
## [20,] -61.88662 47.34463
## [21,] -61.91411 47.28452
## 
## 
## [[4]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -54.22505  47.50716
## 
## Slot "area":
## [1] 0.01430896
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -54.22715 47.44136
##  [2,] -54.27607 47.40654
##  [3,] -54.32598 47.40811
##  [4,] -54.32012 47.43853
##  [5,] -54.25869 47.49766
##  [6,] -54.22739 47.53999
##  [7,] -54.22627 47.56553
##  [8,] -54.21494 47.58511
##  [9,] -54.16836 47.60708
## [10,] -54.12817 47.64683
## [11,] -54.14756 47.57310
## [12,] -54.22715 47.44136
## 
## 
## [[5]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -54.71367  49.56594
## 
## Slot "area":
## [1] 0.01769917
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -54.55439 49.58887
##  [2,] -54.70869 49.53066
##  [3,] -54.74385 49.50776
##  [4,] -54.78652 49.49614
##  [5,] -54.81851 49.51445
##  [6,] -54.86357 49.57607
##  [7,] -54.85542 49.59658
##  [8,] -54.81309 49.59937
##  [9,] -54.78877 49.59121
## [10,] -54.78262 49.57207
## [11,] -54.76406 49.56235
## [12,] -54.73311 49.56216
## [13,] -54.61875 49.62207
## [14,] -54.55918 49.63149
## [15,] -54.53770 49.61997
## [16,] -54.55439 49.58887
## 
## 
## [[6]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -54.16203  49.66665
## 
## Slot "area":
## [1] 0.02772087
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -54.09370 49.74443
##  [2,] -54.01992 49.67949
##  [3,] -53.98066 49.66196
##  [4,] -54.23838 49.59165
##  [5,] -54.26924 49.58701
##  [6,] -54.28613 49.59536
##  [7,] -54.28877 49.66084
##  [8,] -54.27764 49.71147
##  [9,] -54.25898 49.71899
## [10,] -54.19937 49.68853
## [11,] -54.13770 49.75117
## [12,] -54.09370 49.74443
## 
## 
## [[7]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.88087  49.20030
## 
## Slot "area":
## [1] 0.05675608
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##           [,1]     [,2]
## [1,] -61.80112 49.09390
## [2,] -62.00000 49.08686
## [3,] -62.00000 49.36954
## [4,] -61.81714 49.28354
## [5,] -61.73584 49.20376
## [6,] -61.69614 49.13901
## [7,] -61.74551 49.10576
## [8,] -61.80112 49.09390
## 
## 
## [[8]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -55.55475  50.75600
## 
## Slot "area":
## [1] 0.01008282
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -55.53613 50.71968
##  [2,] -55.56968 50.70869
##  [3,] -55.60078 50.70903
##  [4,] -55.62935 50.72080
##  [5,] -55.63389 50.74019
##  [6,] -55.60449 50.78071
##  [7,] -55.52720 50.80122
##  [8,] -55.46929 50.79639
##  [9,] -55.47275 50.77593
## [10,] -55.50381 50.74214
## [11,] -55.53613 50.71968
## 
## 
## [[9]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -56.05665  48.71633
## 
## Slot "area":
## [1] 13.28452
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##             [,1]     [,2]
##   [1,] -55.45874 51.53652
##   [2,] -55.53242 51.43696
##   [3,] -55.58340 51.38857
##   [4,] -55.63076 51.37290
##   [5,] -55.73071 51.35869
##   [6,] -55.94116 51.34302
##   [7,] -56.03110 51.32837
##   [8,] -56.04395 51.26187
##   [9,] -56.03066 51.22690
##  [10,] -55.99990 51.19927
##  [11,] -55.96084 51.19141
##  [12,] -55.87354 51.20791
##  [13,] -55.84111 51.20508
##  [14,] -55.81509 51.19116
##  [15,] -55.79551 51.16616
##  [16,] -55.78535 51.13145
##  [17,] -55.78472 51.08706
##  [18,] -55.80000 51.03330
##  [19,] -55.87139 50.90737
##  [20,] -55.96201 50.83770
##  [21,] -56.07812 50.78096
##  [22,] -56.10654 50.75928
##  [23,] -56.12119 50.73379
##  [24,] -56.13564 50.65098
##  [25,] -56.19575 50.58477
##  [26,] -56.38242 50.41699
##  [27,] -56.45435 50.38003
##  [28,] -56.45479 50.35049
##  [29,] -56.48394 50.27085
##  [30,] -56.53936 50.20674
##  [31,] -56.69399 50.05967
##  [32,] -56.73232 50.00771
##  [33,] -56.74956 49.96655
##  [34,] -56.74717 49.90850
##  [35,] -56.75410 49.88291
##  [36,] -56.78950 49.83374
##  [37,] -56.83887 49.78774
##  [38,] -56.84863 49.76533
##  [39,] -56.82920 49.72461
##  [40,] -56.80923 49.71040
##  [41,] -56.80688 49.67334
##  [42,] -56.82217 49.61348
##  [43,] -56.75679 49.65161
##  [44,] -56.61064 49.78770
##  [45,] -56.50093 49.86963
##  [46,] -56.42759 49.89741
##  [47,] -56.37642 49.93369
##  [48,] -56.32183 50.01377
##  [49,] -56.24707 50.09009
##  [50,] -56.17939 50.11499
##  [51,] -56.14839 50.10034
##  [52,] -56.12217 50.06284
##  [53,] -56.12744 50.01514
##  [54,] -56.16416 49.95728
##  [55,] -56.16128 49.94014
##  [56,] -56.07500 49.98262
##  [57,] -55.92700 50.01777
##  [58,] -55.87334 50.01313
##  [59,] -55.76475 49.96045
##  [60,] -55.67446 49.96655
##  [61,] -55.53003 49.99717
##  [62,] -55.50293 49.98315
##  [63,] -55.52700 49.93677
##  [64,] -55.58369 49.89238
##  [65,] -55.71763 49.82900
##  [66,] -56.03999 49.70469
##  [67,] -56.14019 49.61914
##  [68,] -56.12119 49.62173
##  [69,] -56.05161 49.65840
##  [70,] -55.97852 49.67812
##  [71,] -55.90186 49.68086
##  [72,] -55.86982 49.67017
##  [73,] -55.88232 49.64595
##  [74,] -55.89204 49.58027
##  [75,] -56.08730 49.45195
##  [76,] -56.04121 49.45684
##  [77,] -55.81523 49.51528
##  [78,] -55.67812 49.43462
##  [79,] -55.48975 49.46250
##  [80,] -55.37593 49.48975
##  [81,] -55.37915 49.47290
##  [82,] -55.35449 49.43770
##  [83,] -55.35537 49.38086
##  [84,] -55.34385 49.37290
##  [85,] -55.28994 49.39194
##  [86,] -55.28018 49.41274
##  [87,] -55.28301 49.51382
##  [88,] -55.26636 49.52393
##  [89,] -55.22954 49.50815
##  [90,] -55.20703 49.48203
##  [91,] -55.20029 49.40850
##  [92,] -55.22500 49.33467
##  [93,] -55.25933 49.26699
##  [94,] -55.34248 49.16812
##  [95,] -55.33193 49.12559
##  [96,] -55.35317 49.07944
##  [97,] -55.33477 49.07788
##  [98,] -55.25234 49.12090
##  [99,] -55.24736 49.13857
## [100,] -55.25381 49.17964
## [101,] -55.24453 49.19980
## [102,] -55.17612 49.24443
## [103,] -55.06318 49.29736
## [104,] -55.02617 49.30537
## [105,] -55.01040 49.29302
## [106,] -55.01592 49.26035
## [107,] -54.98262 49.26812
## [108,] -54.91055 49.31626
## [109,] -54.84365 49.34541
## [110,] -54.78188 49.35547
## [111,] -54.71763 49.38857
## [112,] -54.65088 49.44453
## [113,] -54.57905 49.49082
## [114,] -54.50220 49.52734
## [115,] -54.46919 49.52979
## [116,] -54.48062 49.46934
## [117,] -54.46543 49.40054
## [118,] -54.46348 49.34175
## [119,] -54.44824 49.32944
## [120,] -54.38906 49.39214
## [121,] -54.35615 49.41504
## [122,] -54.31675 49.42412
## [123,] -54.27080 49.41929
## [124,] -53.95771 49.44185
## [125,] -53.86245 49.42632
## [126,] -53.75498 49.38530
## [127,] -53.61943 49.32163
## [128,] -53.56958 49.26416
## [129,] -53.56006 49.19170
## [130,] -53.57344 49.14121
## [131,] -53.67114 49.07754
## [132,] -53.75806 49.03540
## [133,] -53.80933 48.99341
## [134,] -53.82490 48.95137
## [135,] -53.84521 48.92544
## [136,] -53.90322 48.88916
## [137,] -54.16128 48.78770
## [138,] -54.09951 48.78477
## [139,] -53.95068 48.80679
## [140,] -53.85288 48.81133
## [141,] -53.84775 48.79668
## [142,] -53.88682 48.76782
## [143,] -53.96152 48.73887
## [144,] -53.96958 48.72490
## [145,] -53.96602 48.70669
## [146,] -53.88613 48.68467
## [147,] -53.78408 48.69541
## [148,] -53.69805 48.67983
## [149,] -53.70635 48.65552
## [150,] -53.77461 48.57632
## [151,] -53.79463 48.52637
## [152,] -53.88555 48.48457
## [153,] -54.06777 48.41885
## [154,] -54.11445 48.39360
## [155,] -54.10425 48.38838
## [156,] -53.93701 48.43662
## [157,] -53.85273 48.44883
## [158,] -53.79932 48.44922
## [159,] -53.73887 48.49580
## [160,] -53.64443 48.51123
## [161,] -53.55205 48.48179
## [162,] -53.41133 48.56216
## [163,] -53.36108 48.57261
## [164,] -53.27544 48.56333
## [165,] -53.22026 48.57788
## [166,] -53.12734 48.63257
## [167,] -53.05728 48.65903
## [168,] -53.04268 48.65664
## [169,] -53.02759 48.63472
## [170,] -53.02075 48.57163
## [171,] -53.03730 48.51587
## [172,] -53.06021 48.48032
## [173,] -53.13574 48.40186
## [174,] -53.18213 48.37437
## [175,] -53.22510 48.36401
## [176,] -53.30117 48.36816
## [177,] -53.33433 48.35596
## [178,] -53.40552 48.29434
## [179,] -53.53120 48.23188
## [180,] -53.60977 48.20771
## [181,] -53.56021 48.17383
## [182,] -53.54185 48.10845
## [183,] -53.56943 48.08809
## [184,] -53.70430 48.06792
## [185,] -53.71016 48.05684
## [186,] -53.75820 48.04238
## [187,] -53.86958 48.01968
## [188,] -53.79355 48.00972
## [189,] -53.65303 48.02573
## [190,] -53.63823 48.01465
## [191,] -53.65762 47.96865
## [192,] -53.69502 47.92119
## [193,] -53.86167 47.79927
## [194,] -53.86367 47.78701
## [195,] -53.83774 47.72725
## [196,] -53.80537 47.68203
## [197,] -53.76514 47.65010
## [198,] -53.67236 47.64824
## [199,] -53.60376 47.66230
## [200,] -53.50376 47.74385
## [201,] -53.28271 47.99785
## [202,] -53.08545 48.06851
## [203,] -52.92100 48.14707
## [204,] -52.88330 48.13115
## [205,] -52.86602 48.11299
## [206,] -52.87202 48.09395
## [207,] -52.95498 48.02930
## [208,] -52.99824 47.97593
## [209,] -53.11084 47.81191
## [210,] -53.15386 47.73457
## [211,] -53.17554 47.65298
## [212,] -53.16982 47.51211
## [213,] -53.15767 47.48779
## [214,] -53.12246 47.45513
## [215,] -53.05684 47.48311
## [216,] -52.94502 47.55283
## [217,] -52.87319 47.61943
## [218,] -52.81694 47.72788
## [219,] -52.78242 47.76943
## [220,] -52.74492 47.76895
## [221,] -52.71143 47.74531
## [222,] -52.70327 47.69302
## [223,] -52.67217 47.62178
## [224,] -52.65366 47.54941
## [225,] -52.66851 47.46982
## [226,] -52.68364 47.42632
## [227,] -52.91240 47.10322
## [228,] -52.88813 47.04585
## [229,] -52.88208 47.01108
## [230,] -52.88921 46.97412
## [231,] -52.96172 46.81943
## [232,] -53.03193 46.72275
## [233,] -53.06978 46.68125
## [234,] -53.11484 46.65581
## [235,] -53.16699 46.64648
## [236,] -53.21367 46.66050
## [237,] -53.25488 46.69771
## [238,] -53.29131 46.71704
## [239,] -53.32305 46.71836
## [240,] -53.38174 46.71143
## [241,] -53.53613 46.63252
## [242,] -53.56777 46.62827
## [243,] -53.58979 46.63887
## [244,] -53.61636 46.68027
## [245,] -53.59517 46.88848
## [246,] -53.58135 46.95728
## [247,] -53.61216 47.01035
## [248,] -53.57964 47.09941
## [249,] -53.57847 47.13325
## [250,] -53.59736 47.14600
## [251,] -53.63638 47.13770
## [252,] -53.69536 47.09292
## [253,] -53.77432 47.01182
## [254,] -53.86001 46.93945
## [255,] -54.00957 46.83960
## [256,] -54.07603 46.81997
## [257,] -54.10239 46.82490
## [258,] -54.13281 46.83857
## [259,] -54.17373 46.88037
## [260,] -54.17329 46.91719
## [261,] -54.15522 46.96748
## [262,] -54.09268 47.08623
## [263,] -53.97051 47.26196
## [264,] -53.86909 47.38701
## [265,] -53.84951 47.44033
## [266,] -53.87788 47.46357
## [267,] -53.90083 47.50933
## [268,] -53.93975 47.64468
## [269,] -53.98901 47.75620
## [270,] -54.04727 47.80562
## [271,] -54.19185 47.85981
## [272,] -54.21841 47.84673
## [273,] -54.23389 47.77168
## [274,] -54.40469 47.55591
## [275,] -54.43447 47.46230
## [276,] -54.45591 47.42759
## [277,] -54.48813 47.40386
## [278,] -54.56255 47.37520
## [279,] -54.54238 47.42510
## [280,] -54.46323 47.53623
## [281,] -54.47393 47.54707
## [282,] -54.57451 47.45776
## [283,] -54.65117 47.40820
## [284,] -54.74468 47.39546
## [285,] -54.80151 47.39863
## [286,] -54.85664 47.38501
## [287,] -55.09043 47.17393
## [288,] -55.09922 47.10356
## [289,] -55.13965 47.04595
## [290,] -55.25493 46.94175
## [291,] -55.31572 46.90571
## [292,] -55.40127 46.89927
## [293,] -55.47930 46.91729
## [294,] -55.53071 46.91401
## [295,] -55.65234 46.88145
## [296,] -55.78853 46.86724
## [297,] -55.84473 46.87383
## [298,] -55.88062 46.88721
## [299,] -55.94990 46.92769
## [300,] -55.95820 46.95640
## [301,] -55.95449 46.97324
## [302,] -55.91924 47.01689
## [303,] -55.83838 47.07163
## [304,] -55.77183 47.09209
## [305,] -55.61006 47.11963
## [306,] -55.49150 47.16064
## [307,] -55.40122 47.22148
## [308,] -55.36089 47.25859
## [309,] -55.19082 47.44897
## [310,] -54.97563 47.51616
## [311,] -54.86953 47.57090
## [312,] -54.79536 47.64033
## [313,] -54.78462 47.66475
## [314,] -54.89102 47.62949
## [315,] -54.94595 47.62085
## [316,] -55.03501 47.63389
## [317,] -55.07456 47.65757
## [318,] -55.19658 47.65005
## [319,] -55.36631 47.66108
## [320,] -55.39077 47.64287
## [321,] -55.41270 47.55039
## [322,] -55.43467 47.50127
## [323,] -55.46064 47.48477
## [324,] -55.49863 47.47505
## [325,] -55.57612 47.46523
## [326,] -55.77471 47.49829
## [327,] -55.81138 47.51636
## [328,] -55.86206 47.53008
## [329,] -56.08135 47.49995
## [330,] -56.12725 47.50283
## [331,] -56.08369 47.52451
## [332,] -55.86709 47.59233
## [333,] -55.84438 47.78784
## [334,] -55.85791 47.81919
## [335,] -55.91846 47.79189
## [336,] -56.02012 47.76372
## [337,] -56.08965 47.77188
## [338,] -56.12144 47.78916
## [339,] -56.15059 47.77451
## [340,] -56.22129 47.67139
## [341,] -56.26299 47.65845
## [342,] -56.32578 47.65449
## [343,] -56.45957 47.61694
## [344,] -56.72231 47.59229
## [345,] -56.77412 47.56499
## [346,] -56.95249 47.57446
## [347,] -57.47344 47.63110
## [348,] -57.65981 47.62539
## [349,] -57.88408 47.66001
## [350,] -57.92554 47.67490
## [351,] -58.23931 47.66885
## [352,] -58.33320 47.67686
## [353,] -58.32695 47.71987
## [354,] -58.33687 47.73086
## [355,] -58.42803 47.68340
## [356,] -58.50889 47.65259
## [357,] -58.61313 47.62622
## [358,] -58.94116 47.58047
## [359,] -59.11694 47.57070
## [360,] -59.21929 47.60254
## [361,] -59.25977 47.63418
## [362,] -59.32065 47.73691
## [363,] -59.36240 47.86567
## [364,] -59.36206 47.88896
## [365,] -59.34087 47.93364
## [366,] -59.27207 47.99556
## [367,] -58.96084 48.15938
## [368,] -58.71060 48.32505
## [369,] -58.60498 48.41133
## [370,] -58.50264 48.44204
## [371,] -58.33555 48.51367
## [372,] -58.33022 48.52212
## [373,] -58.49224 48.51304
## [374,] -58.60615 48.53286
## [375,] -58.72256 48.54072
## [376,] -58.94380 48.52178
## [377,] -59.16680 48.52178
## [378,] -59.16768 48.55850
## [379,] -59.06343 48.62769
## [380,] -58.84180 48.74644
## [381,] -58.81919 48.74683
## [382,] -58.88711 48.69155
## [383,] -58.90645 48.65020
## [384,] -58.87725 48.62271
## [385,] -58.84341 48.60532
## [386,] -58.71646 48.59805
## [387,] -58.68735 48.62207
## [388,] -58.64160 48.74941
## [389,] -58.54561 48.89687
## [390,] -58.49375 49.00322
## [391,] -58.40366 49.08433
## [392,] -58.35869 49.09653
## [393,] -58.31875 49.08135
## [394,] -58.18613 49.06191
## [395,] -58.04966 48.98755
## [396,] -58.00557 48.98125
## [397,] -57.99053 48.98794
## [398,] -58.04058 49.00977
## [399,] -58.08184 49.04473
## [400,] -58.09893 49.07744
## [401,] -58.04907 49.17998
## [402,] -57.99067 49.20947
## [403,] -57.98008 49.22964
## [404,] -58.09687 49.23008
## [405,] -58.19092 49.25874
## [406,] -58.21890 49.30513
## [407,] -58.21338 49.38667
## [408,] -58.18271 49.43540
## [409,] -58.10742 49.49971
## [410,] -58.01582 49.54248
## [411,] -57.96123 49.53154
## [412,] -57.85605 49.47383
## [413,] -57.79131 49.48999
## [414,] -57.79883 49.50854
## [415,] -57.89746 49.60039
## [416,] -57.92905 49.66841
## [417,] -57.92617 49.70083
## [418,] -57.71250 50.02490
## [419,] -57.60796 50.19878
## [420,] -57.46553 50.46367
## [421,] -57.43262 50.50581
## [422,] -57.36045 50.58394
## [423,] -57.33057 50.60518
## [424,] -57.23740 50.60537
## [425,] -57.17959 50.61484
## [426,] -57.26416 50.64937
## [427,] -57.29443 50.67339
## [428,] -57.29800 50.69873
## [429,] -57.27490 50.72529
## [430,] -57.24214 50.74492
## [431,] -57.13164 50.78740
## [432,] -57.05327 50.85732
## [433,] -57.00566 50.93965
## [434,] -57.01274 50.96772
## [435,] -57.03730 50.99565
## [436,] -57.03594 51.01084
## [437,] -56.97637 51.02798
## [438,] -56.82515 51.12573
## [439,] -56.80547 51.14448
## [440,] -56.75020 51.27490
## [441,] -56.68242 51.33276
## [442,] -56.61904 51.36245
## [443,] -56.51797 51.39932
## [444,] -56.20737 51.48862
## [445,] -56.02559 51.56836
## [446,] -55.90210 51.56392
## [447,] -55.86582 51.50830
## [448,] -55.69043 51.47134
## [449,] -55.65957 51.51104
## [450,] -55.70063 51.55942
## [451,] -55.66641 51.57891
## [452,] -55.52163 51.59639
## [453,] -55.49644 51.58984
## [454,] -55.45322 51.56230
## [455,] -55.45874 51.53652
## 
## 
## [[10]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -55.34538  51.93911
## 
## Slot "area":
## [1] 0.008752035
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##           [,1]     [,2]
## [1,] -55.36123 51.88965
## [2,] -55.40889 51.88882
## [3,] -55.41963 51.90005
## [4,] -55.39980 51.93848
## [5,] -55.34648 51.98286
## [6,] -55.27407 51.99517
## [7,] -55.29355 51.92998
## [8,] -55.36123 51.88965
## 
## 
## [[11]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.07699  56.07626
## 
## Slot "area":
## [1] 0.0203146
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -60.99448 56.03931
##  [2,] -60.98271 56.01514
##  [3,] -61.13701 56.03257
##  [4,] -61.19131 56.04785
##  [5,] -61.19585 56.06392
##  [6,] -61.18818 56.08896
##  [7,] -61.15757 56.11836
##  [8,] -61.08691 56.14082
##  [9,] -61.04854 56.12925
## [10,] -60.96641 56.09883
## [11,] -60.95537 56.08042
## [12,] -60.99448 56.03931
## 
## 
## [[12]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.80731  57.49889
## 
## Slot "area":
## [1] 0.03957924
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -61.74360 57.55459
##  [2,] -61.65952 57.52495
##  [3,] -61.63750 57.41606
##  [4,] -61.79526 57.42246
##  [5,] -61.97549 57.49541
##  [6,] -62.00000 57.53181
##  [7,] -62.00000 57.56038
##  [8,] -61.98330 57.56675
##  [9,] -61.93750 57.55410
## [10,] -61.89307 57.57314
## [11,] -61.84834 57.57935
## [12,] -61.74360 57.55459
## 
## 
## [[13]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.96818  57.77801
## 
## Slot "area":
## [1] 0.01597491
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -62.00000 57.92540
##  [2,] -61.95864 57.91177
##  [3,] -61.89907 57.86133
##  [4,] -61.91406 57.82505
##  [5,] -61.96777 57.80332
##  [6,] -61.99492 57.76943
##  [7,] -61.93125 57.66855
##  [8,] -61.96797 57.61191
##  [9,] -62.00000 57.59811
## [10,] -62.00000 57.92540
## 
## 
## [[14]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.71237  56.94493
## 
## Slot "area":
## [1] 0.3289865
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -62.00000 57.43593
##  [2,] -61.92114 57.42080
##  [3,] -61.85107 57.38130
##  [4,] -61.84980 57.37041
##  [5,] -61.88584 57.34785
##  [6,] -61.93887 57.27437
##  [7,] -61.97744 57.24795
##  [8,] -61.94453 57.22813
##  [9,] -61.86084 57.19756
## [10,] -61.79834 57.18623
## [11,] -61.71631 57.19619
## [12,] -61.62852 57.18315
## [13,] -61.33374 57.01060
## [14,] -61.34575 56.92158
## [15,] -61.39048 56.85298
## [16,] -61.37280 56.77583
## [17,] -61.37163 56.68081
## [18,] -61.53169 56.65459
## [19,] -62.00000 56.69383
## [20,] -62.00000 57.43593
## 
## 
## [[15]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -61.90007  56.53745
## 
## Slot "area":
## [1] 0.01990032
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##            [,1]     [,2]
##  [1,] -62.00000 56.59593
##  [2,] -61.99160 56.59082
##  [3,] -61.85493 56.58428
##  [4,] -61.81338 56.57051
##  [5,] -61.73774 56.52603
##  [6,] -61.76006 56.51074
##  [7,] -61.89941 56.50542
##  [8,] -62.00000 56.45838
##  [9,] -62.00000 56.59593
## 
## 
## [[16]]
## An object of class "Polygon"
## Slot "labpt":
## [1] -59.58346  52.95251
## 
## Slot "area":
## [1] 24.09898
## 
## Slot "hole":
## [1] FALSE
## 
## Slot "ringDir":
## [1] 1
## 
## Slot "coords":
##             [,1]     [,2]
##   [1,] -62.00000 56.44963
##   [2,] -61.94043 56.42358
##   [3,] -61.69248 56.39707
##   [4,] -61.51460 56.39033
##   [5,] -61.42529 56.36064
##   [6,] -61.49868 56.32759
##   [7,] -61.70713 56.28872
##   [8,] -61.71309 56.23096
##   [9,] -61.55859 56.20781
##  [10,] -61.42109 56.22183
##  [11,] -61.36470 56.21602
##  [12,] -61.32441 56.07622
##  [13,] -61.30112 56.04717
##  [14,] -61.44893 56.02236
##  [15,] -61.44951 55.99570
##  [16,] -61.35127 55.97368
##  [17,] -61.18789 55.95537
##  [18,] -61.13389 55.93027
##  [19,] -61.12300 55.88857
##  [20,] -61.08936 55.86636
##  [21,] -60.99575 55.86235
##  [22,] -60.89268 55.91421
##  [23,] -60.83184 55.95786
##  [24,] -60.74326 55.94146
##  [25,] -60.73662 55.88696
##  [26,] -60.63096 55.82500
##  [27,] -60.59258 55.81484
##  [28,] -60.56211 55.72700
##  [29,] -60.47583 55.80513
##  [30,] -60.41260 55.78857
##  [31,] -60.34102 55.78467
##  [32,] -60.36543 55.70908
##  [33,] -60.40830 55.64956
##  [34,] -60.35195 55.61235
##  [35,] -60.30830 55.55698
##  [36,] -60.19238 55.48091
##  [37,] -60.22402 55.44438
##  [38,] -60.36094 55.36631
##  [39,] -60.43311 55.24277
##  [40,] -60.45010 55.19995
##  [41,] -60.52051 55.12900
##  [42,] -60.61714 55.06021
##  [43,] -60.55654 55.06748
##  [44,] -60.34077 55.19395
##  [45,] -60.21255 55.23643
##  [46,] -59.93032 55.25942
##  [47,] -59.86211 55.29487
##  [48,] -59.75879 55.30957
##  [49,] -59.69551 55.26914
##  [50,] -59.68906 55.19634
##  [51,] -59.60547 55.17334
##  [52,] -59.51768 55.19736
##  [53,] -59.43789 55.17593
##  [54,] -59.48584 55.13018
##  [55,] -59.74170 54.94258
##  [56,] -59.81641 54.86724
##  [57,] -59.83779 54.81396
##  [58,] -59.74990 54.88701
##  [59,] -59.42856 55.05552
##  [60,] -59.39419 55.08071
##  [61,] -59.32417 55.15283
##  [62,] -59.25957 55.19995
##  [63,] -59.08633 55.18325
##  [64,] -58.99712 55.14946
##  [65,] -58.95581 55.05508
##  [66,] -58.88579 54.95225
##  [67,] -58.78018 54.83838
##  [68,] -58.49990 54.78311
##  [69,] -58.39814 54.77412
##  [70,] -58.22285 54.81270
##  [71,] -58.19526 54.86592
##  [72,] -58.05850 54.88223
##  [73,] -57.96245 54.87573
##  [74,] -57.92930 54.77314
##  [75,] -57.82686 54.71865
##  [76,] -57.72490 54.67373
##  [77,] -57.62661 54.65034
##  [78,] -57.48301 54.64028
##  [79,] -57.40449 54.59087
##  [80,] -57.40444 54.57041
##  [81,] -57.48535 54.51748
##  [82,] -57.56323 54.44043
##  [83,] -57.69927 54.38657
##  [84,] -57.88911 54.38408
##  [85,] -58.15137 54.35044
##  [86,] -58.16191 54.31997
##  [87,] -58.21973 54.28647
##  [88,] -58.35913 54.25332
##  [89,] -58.43521 54.22812
##  [90,] -58.55840 54.10298
##  [91,] -58.63320 54.04956
##  [92,] -58.71943 54.03940
##  [93,] -58.84082 54.04448
##  [94,] -58.92021 54.03311
##  [95,] -58.97847 54.01025
##  [96,] -59.01265 53.97627
##  [97,] -59.03882 53.96362
##  [98,] -59.20142 53.92910
##  [99,] -59.49653 53.83418
## [100,] -59.65269 53.83125
## [101,] -59.74946 53.84229
## [102,] -59.82305 53.83442
## [103,] -59.87334 53.80776
## [104,] -60.01416 53.76157
## [105,] -60.05654 53.73335
## [106,] -60.08135 53.70103
## [107,] -60.10049 53.63423
## [108,] -60.11729 53.61011
## [109,] -60.14492 53.59614
## [110,] -60.26333 53.61006
## [111,] -60.39541 53.65332
## [112,] -60.36953 53.60747
## [113,] -60.16025 53.52998
## [114,] -60.10029 53.48696
## [115,] -60.15713 53.44980
## [116,] -60.29028 53.39146
## [117,] -60.30576 53.36011
## [118,] -60.25117 53.34355
## [119,] -60.27271 53.31709
## [120,] -60.34570 53.28901
## [121,] -60.33750 53.27744
## [122,] -60.32949 53.26611
## [123,] -60.14834 53.30654
## [124,] -59.98711 53.39282
## [125,] -59.88174 53.48008
## [126,] -59.82905 53.50454
## [127,] -59.62109 53.53682
## [128,] -59.49814 53.57476
## [129,] -59.32227 53.64375
## [130,] -59.12939 53.74395
## [131,] -58.91958 53.87529
## [132,] -58.65205 53.97788
## [133,] -58.32671 54.05181
## [134,] -58.08809 54.08950
## [135,] -57.93599 54.09116
## [136,] -57.92827 54.10356
## [137,] -58.06484 54.12676
## [138,] -58.17744 54.13130
## [139,] -58.31748 54.11445
## [140,] -58.36079 54.15449
## [141,] -58.35615 54.17192
## [142,] -58.30996 54.20166
## [143,] -58.19209 54.22817
## [144,] -57.61494 54.19111
## [145,] -57.41606 54.16274
## [146,] -57.19888 53.92437
## [147,] -57.14897 53.84771
## [148,] -57.13496 53.79185
## [149,] -57.15693 53.75688
## [150,] -57.24399 53.71548
## [151,] -57.48945 53.63311
## [152,] -57.52407 53.61143
## [153,] -57.52734 53.59990
## [154,] -57.42021 53.58325
## [155,] -57.38613 53.56055
## [156,] -57.33174 53.46909
## [157,] -57.22139 53.52852
## [158,] -57.01216 53.67261
## [159,] -56.84087 53.73945
## [160,] -56.69658 53.75767
## [161,] -56.52432 53.76646
## [162,] -56.46499 53.76504
## [163,] -56.44434 53.71831
## [164,] -56.35400 53.62446
## [165,] -56.27021 53.60010
## [166,] -56.11016 53.58760
## [167,] -55.96611 53.47114
## [168,] -55.91123 53.39082
## [169,] -55.85938 53.34390
## [170,] -55.86338 53.31226
## [171,] -55.85479 53.28584
## [172,] -55.81689 53.24575
## [173,] -55.79795 53.21196
## [174,] -55.80820 53.13467
## [175,] -55.89233 53.00044
## [176,] -55.82988 52.87842
## [177,] -55.85791 52.82339
## [178,] -55.87251 52.73569
## [179,] -55.81865 52.67715
## [180,] -55.80283 52.64316
## [181,] -55.84844 52.62334
## [182,] -56.16699 52.57476
## [183,] -56.29238 52.57378
## [184,] -56.32490 52.54453
## [185,] -56.22842 52.53599
## [186,] -56.05259 52.53740
## [187,] -55.84019 52.50762
## [188,] -55.74648 52.47456
## [189,] -55.70596 52.42827
## [190,] -55.71621 52.39150
## [191,] -55.77715 52.36426
## [192,] -55.89668 52.36958
## [193,] -56.01172 52.39448
## [194,] -56.00464 52.37041
## [195,] -55.83364 52.31040
## [196,] -55.78350 52.27993
## [197,] -55.69106 52.24160
## [198,] -55.67280 52.19014
## [199,] -55.69521 52.13779
## [200,] -56.01748 51.92930
## [201,] -56.28257 51.79707
## [202,] -56.54858 51.68101
## [203,] -56.97598 51.45767
## [204,] -57.01826 51.44678
## [205,] -57.09561 51.44253
## [206,] -57.29922 51.47827
## [207,] -57.46167 51.46909
## [208,] -57.76958 51.42593
## [209,] -57.85376 51.39951
## [210,] -58.02266 51.32207
## [211,] -58.08940 51.31099
## [212,] -58.27046 51.29521
## [213,] -58.44229 51.30591
## [214,] -58.51035 51.29507
## [215,] -58.59326 51.25713
## [216,] -58.61475 51.23706
## [217,] -58.63760 51.17168
## [218,] -59.05493 50.87910
## [219,] -59.16538 50.77988
## [220,] -59.37803 50.67544
## [221,] -59.61191 50.49209
## [222,] -59.81533 50.41826
## [223,] -59.88633 50.31641
## [224,] -60.08018 50.25459
## [225,] -60.43809 50.23887
## [226,] -60.60820 50.22114
## [227,] -60.80723 50.24980
## [228,] -60.95630 50.20542
## [229,] -61.18071 50.19150
## [230,] -61.28975 50.20195
## [231,] -61.72485 50.10405
## [232,] -61.83535 50.19697
## [233,] -61.91953 50.23286
## [234,] -62.00000 50.23484
## [235,] -62.00000 56.44963
## 
## 
## 
## Slot "plotOrder":
##  [1] 16  9  2 14  1  7  3 12  6 11 15  5 13  4  8 10
## 
## Slot "labpt":
## [1] -59.58346  52.95251
## 
## Slot "ID":
## [1] "0"
## 
## Slot "area":
## [1] 38.75481
## 
## 
## 
## Slot "plotOrder":
## [1] 1
## 
## Slot "bbox":
##   min       max
## x -62 -52.65366
## y  46  57.92540
## 
## Slot "proj4string":
## CRS arguments:
##  +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0
```
]

--

.pull-right[
![](Intro_to_sf_and_sp_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;

]

---
#The sf package
* .large[A newer approach to dealing with spatial data ("simple features")]

--

* .large[Stores spatial data as part of a modified ("sf") data frame]

--

* .large[Different types of object ("sfg") for different data types, but all types can be combined in one column ("sfc") in one data frame ("sf") ]

--
* .large[Pros:]
  * Faster than sp (for most things)
  * Easier to understand objects, that works with Tidyverse
  * Simplier to specify projections and datum
  
--
* .large[Cons:]
  * Currently less package support
  * Still actively in development; Not stable yet
---

#The sf package



```r
library(sf)

atlantic_map_sf = st_read("data/map_layers/atlantic_map.shp")
print(atlantic_map_sf)
plot(atlantic_map_sf)
```

---
#The sf package

.pull-left[

```
## Reading layer `atlantic_map' from data source `C:\Users\PedersonE\Documents\teaching\DFO R workshops2\dfo_sf_sp_workshop\data\map_layers\atlantic_map.shp' using driver `ESRI Shapefile'
## Simple feature collection with 1 feature and 1 field
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -62 ymin: 46 xmax: -52.65366 ymax: 57.9254
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
```

```
## Simple feature collection with 1 feature and 1 field
## geometry type:  MULTIPOLYGON
## dimension:      XY
## bbox:           xmin: -62 ymin: 46 xmax: -52.65366 ymax: 57.9254
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
##    pop_est                       geometry
## 1 33487208 MULTIPOLYGON (((-60.6670057...
```
]

--

.pull-right[
![](Intro_to_sf_and_sp_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;
]

---

class: center, middle

# Next: working with spatial data in sp

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
